<Window
  x:Class="MermaidPad.Dialogs.ExportDialog"
  xmlns="https://github.com/avaloniaui"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
  xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
  xmlns:vm="clr-namespace:MermaidPad.ViewModels"
  Title="Export Diagram"
  Width="400"
  Height="350"
  d:DesignHeight="350"
  d:DesignWidth="400"
  x:DataType="vm:ExportDialogViewModel"
  CanResize="False"
  WindowStartupLocation="CenterOwner"
  mc:Ignorable="d">

  <Window.Styles>
    <Style Selector="RadioButton">
      <Setter Property="Margin" Value="0,5" />
    </Style>
    <Style Selector="Button.accent">
      <Setter Property="Background" Value="#0078D4" />
      <Setter Property="Foreground" Value="White" />
    </Style>
    <Style Selector="Button.accent:pointerover">
      <Setter Property="Background" Value="#106EBE" />
    </Style>
    <Style Selector="Border.options-panel">
      <Setter Property="Background" Value="#F5F5F5" />
      <Setter Property="CornerRadius" Value="5" />
      <Setter Property="Padding" Value="15" />
      <Setter Property="Margin" Value="0,10,0,0" />
    </Style>
  </Window.Styles>

  <StackPanel Margin="20" Spacing="15">
    <TextBlock
      FontSize="14"
      FontWeight="Bold"
      Text="Select Export Format:" />

    <RadioButton GroupName="Format" IsChecked="{Binding IsSvgSelected}">
      <StackPanel Orientation="Horizontal" Spacing="10">
        <PathIcon Width="24" Height="24">
          <PathIcon.Data>
            <PathGeometry>M19,3H5C3.89,3 3,3.89 3,5V19C3,20.1 3.9,21 5,21H19C20.1,21 21,20.1 21,19V5C21,3.89 20.1,3 19,3M19,19H5V5H19V19M11.68,7.26C11.68,7.26 10,7.26 10,9.76V11.76C10,14.26 11.68,14.26 11.68,14.26H12.5C12.5,14.26 13,14.26 13,15.26C13,16.26 12.5,16.26 12.5,16.26H9.5V18H12.32C12.32,18 14,18 14,15.5V13.5C14,11 12.32,11 12.32,11H11.5C11.5,11 11,11 11,10C11,9 11.5,9 11.5,9H14.5V7.26H11.68M6.5,12L8,9H7L5.5,12L7,15H8L6.5,12M16,9H15L16.5,12L15,15H16L17.5,12L16,9Z</PathGeometry>
          </PathIcon.Data>
        </PathIcon>
        <StackPanel>
          <TextBlock FontWeight="SemiBold" Text="SVG (Scalable Vector Graphics)" />
          <TextBlock
            FontSize="12"
            Opacity="0.7"
            Text="Best for editing and scaling" />
        </StackPanel>
      </StackPanel>
    </RadioButton>

    <RadioButton GroupName="Format" IsChecked="{Binding IsPngSelected}">
      <StackPanel Orientation="Horizontal" Spacing="10">
        <PathIcon Width="24" Height="24">
          <PathIcon.Data>
            <PathGeometry>M19,3H5C3.89,3 3,3.89 3,5V19C3,20.1 3.9,21 5,21H19C20.1,21 21,20.1 21,19V5C21,3.89 20.1,3 19,3M19,19H5V5H19V19M10,7H8V17H10V11H11V17H13V7H11V9H10V7M16,7H14V17H16V13H17V11H16V7M16,9V11H17V9H16Z</PathGeometry>
          </PathIcon.Data>
        </PathIcon>
        <StackPanel>
          <TextBlock FontWeight="SemiBold" Text="PNG (Portable Network Graphics)" />
          <TextBlock
            FontSize="12"
            Opacity="0.7"
            Text="Best for sharing and presentations" />
        </StackPanel>
      </StackPanel>
    </RadioButton>

    <!--  PNG-specific options  -->
    <Border Classes="options-panel" IsVisible="{Binding IsPngSelected}">
      <StackPanel Spacing="10">
        <TextBlock FontWeight="SemiBold" Text="PNG Options:" />
        <StackPanel Orientation="Horizontal" Spacing="10">
          <TextBlock
            Width="50"
            VerticalAlignment="Center"
            Text="Scale:" />
          <ComboBox Width="150" SelectedItem="{Binding SelectedScale}">
            <ComboBox.Items>
              <ComboBoxItem>1x (Standard)</ComboBoxItem>
              <ComboBoxItem IsSelected="True">2x (Recommended)</ComboBoxItem>
              <ComboBoxItem>3x (High DPI)</ComboBoxItem>
              <ComboBoxItem>4x (Ultra HD)</ComboBoxItem>
            </ComboBox.Items>
          </ComboBox>
        </StackPanel>
        <CheckBox Content="Transparent Background" IsChecked="{Binding TransparentBackground}" />
      </StackPanel>
    </Border>

    <Border
      Height="1"
      Margin="0,10"
      Background="#E0E0E0" />

    <StackPanel
      HorizontalAlignment="Right"
      Orientation="Horizontal"
      Spacing="10">
      <Button
        Width="80"
        Command="{Binding CancelCommand}"
        Content="Cancel" />
      <Button
        Width="80"
        Classes="accent"
        Command="{Binding ExportCommand}"
        Content="Export" />
    </StackPanel>
  </StackPanel>
</Window>
